<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NioJin.exe</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="https://use.typekit.net/bqk8rmx.css">
    <script src="gsap.js"></script>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        img {
            pointer-events: none;
            user-select: none;
        }

        img {
        filter: grayscale(100%); 
        transition: filter 0.5s ease; 
        }

        img:hover {
        filter: grayscale(0%);
        }

        div {
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
        }

        body {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100vh;
            background-color: #f1f1f1;
            overflow: hidden;
            /* font-family: 'PP Editorial Old', italic, sans-serif;
            font-style: italic; */
            font-family: "megumi", sans-serif;
font-weight: 200;
font-style: normal;
            font-size: .25rem;
        }

        .photos {
            position: absolute;
            flex-direction: column;
            overflow: hidden;
            width: 60%; 
            
            /* border-left: .025rem dotted #000000;
border-right: .025rem dotted #000000; */
            }

        .photos_line {
            font-size: 1px;
            height: 40em;
            margin-top: 50em;
            margin-bottom: 50em;
            flex-shrink: 0;
            width: 100%;
        }

        .photos_line_photo {
            font-size: 1px;
            width: 75em;
            /* height: 90%; */
            aspect-ratio: 1 / 1;
            margin-left: 75em;
            margin-right: 75em;
            /* border-radius: 15em; */
            /* background-color: #000000; */
            border-color: #f1f1f1;
            border-style: solid;
            border-width: .0125rem;
            overflow: hidden;
            flex-shrink: 0;
        }

        .photos_line_photo img {
            height: 100%;
            transition: 0.3s ease;
        }

        .photos_line_photo:hover img {
            transform: scale(1.2);
            transition: transform 0.3s ease;
        }

        /* 1. 隐藏默认光标 */
.photos_line_photo:hover {
    cursor: none; 
}

.photos_line_photo:hover a {
    cursor: none; 
}


#custom-cursor {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 9999; 
    /* background-color: #333; */
    color: white;
    padding: 5px 10px;
    font-size: 1.25rem;
    white-space: nowrap;
    mix-blend-mode: difference;
    
    pointer-events: none; /* 关键：确保不干扰下方的点击事件 */
    
    opacity: 0; 
    transform: translate(-50%, -50%); 
    transition: opacity 0.2s ease; 
}



        @media screen and (max-aspect-ratio: 1.5/1) {

            .photos_line,
            .photos_line_photo {
                font-size: 2px;
            }
        }

        @media screen and (max-aspect-ratio: 0.8/1) {

            .photos_line,
            .photos_line_photo {
                font-size: 2.8px;
            }
        }

        .header {
            position: absolute;
            top:50%;
            left: 50%;
            transform: translate(-50%,-50%);
            width: 58%;
        }

       .text{
        font-size: 1rem;
        /* font-family: 'PP Editorial Old', italic, sans-serif; */
        /* font-style: italic; */
       }

       .contact a:hover {
    cursor: context-menu; 
}

       .contact {
        position: absolute;
        bottom: 5%;
        left: 50%;
        transform: translate(-50%,0%);
        width: 100%;
        height: 1vh;
        cursor: context-menu;
}

.contact_text{
        font-size: 1rem;
        /* font-family: 'PP Editorial Old', italic, sans-serif;*/
        font-style: italic;
        text-transform: capitalize;
        cursor: context-menu;
       }

       a{
        color:black;
        text-decoration: none;
        cursor: context-menu;
       }



a img {
    max-width: 100%; 
    height: auto;   
    display: block; 
}

.side-text {
    position: fixed;
    top: 0;
    height: 100vh;
    width: 1.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 0.75rem;
    line-height: 1.2;
    color: #000;
    overflow: hidden;
    pointer-events: none;
    white-space: pre; /* 保留换行 */
    font-family: "megumi", sans-serif;
    font-weight: 200;
    font-style: italic;
}

.side-text--left {
    left: calc(50% - 33.33% - 1.5rem);
}

.side-text--right {
    left: calc(50% + 33.33%); 
}

/* 移动端隐藏 */
@media screen and (max-width: 768px) {
    .side-text {
    position: fixed;
    top: 0;
    height: 100vh;
    width: 1.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 0.75rem;
    line-height: 1.2;
    color: #000;
    overflow: hidden;
    pointer-events: none;
    white-space: pre; /* 保留换行 */
    font-family: "megumi", sans-serif;
    font-weight: 200;
    font-style: italic;
}

.side-text--left {
    left: calc(50% - 43% - 1.5rem);
}

.side-text--right {
    left: calc(50% + 43%); 
}
}

@media screen and (max-width: 768px) {
    
    body{
        height: 100svh !important; 
        overflow: hidden !important;
    }   

    .photos {
        /* margin-top:; */
        position: absolute; 
        width: 90%; 
        overflow: visible;
        display: grid;
        grid-template-columns: repeat(4, 1fr); 
        gap: 10rem;
        transform: translate(-50%, -50%);/* 向左平移自身宽度的一半 */
        /* border-left: .025rem dotted #000000;
border-right: .025rem dotted #000000; */
         border: none;
        

    }

    .photos_line {
        margin: 0 !important; 
        height: auto !important;
        width: auto !important;
        display: contents; 

    }

    .photos_line_photo {
        margin: 0 !important; 
        width: 10.5rem; /* 让 Grid 自动分配宽度 */
        
        /* 保持 1:1 或您想要的比例 */
        aspect-ratio: 1 / 1; 
        
        /* 调整字体大小，如果其他元素依赖 rem/em */
        font-size: 10px; 
    }
    
 
    .header, .contact {
        position: absolute;
        left: auto;
        transform: none;
        width: 90%;
        text-align: center;
    }

    .header{
        left: 50%; 
        transform: translate(-50%, -50%);
        top: 6vh;
    }
    .contact{
        bottom:4vh;
    }

}


    </style>
</head>

<body>
    <div class="header">
        <div class="text">
            <!-- <h1 class="name">Nio Jin</h1> -->
            <p class="text">Nio Jin.</p>
        </div>
    </div>
    <div class="contact">
        <a class="contact_text" href="https://drive.google.com/file/d/1iJO6BU_6_0B6j8qWHyJ5oZa6vEUjmAem/view?usp=sharing" target="_blank">
        Contact</a>
    </div>
    <div id="custom-cursor"></div>
    <div class="photos">
        <div class="photos_line">
            <div class="photos_line_photo" data-cursor-text="the afternoon we tried suicide">
                <a class="image-link" href="https://ni0j.github.io/theAfternoonWe/">
                    <img src="photos/photo1.png" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the [Lost H]orizon.1">
                <a class="image-link" href="https://ni0j.github.io/theLostHorizon1/">
                    <img src="photos/photo2.jpg" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the [Lost H]orizon">
                <a class="image-link" href="https://ni0j.github.io/theLostHorizon/" target="_blank">
                    <img src="photos/photo3.png" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="jellyfish that live inside my computer">
                <a class="image-link" href="https://ni0j.github.io/jellyfish/" target="_blank">
                    <img src="photos/photo4.PNG" />
                </a>
            </div>
            <!-- <div class="photos_line_photo">
                <img src="photos/photo7.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo7.png" />
            </div> -->
        </div>
        <div class="photos_line">
            <div class="photos_line_photo" data-cursor-text="GALA">
                <a class="image-link" href="https://ni0j.github.io/GALA/" target="_blank">
                    <img src="photos/photo5.png" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="pcell.otf">
                <a class="image-link" href="https://ni0j.github.io/pcell.otf/">
                    <img src="photos/photo6.jpg" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the [Lost H]orizon.1">
                <a class="image-link" href="https://ni0j.github.io/theLostHorizon1/">
                    <img src="photos/photo2.jpg" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the [Lost H]orizon.1">
                <a class="image-link" href="https://ni0j.github.io/theLostHorizon1/">
                    <img src="photos/photo2.jpg" />
                </a>
            </div>
            <!-- <div class="photos_line_photo">
                <img src="photos/photo12.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo13.png" />
            </div> -->
            <!-- <div class="photos_line_photo">
                <img src="photos/photo14.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo7.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo7.png" />
            </div> -->
        </div>
        <div class="photos_line">
            <div class="photos_line_photo" data-cursor-text="the [Lost H]orizon.1">
                <a class="image-link" href="https://ni0j.github.io/theLostHorizon1/">
                    <img src="photos/photo2.jpg" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the afternoon we tried suicide">
                <a class="image-link" href="https://ni0j.github.io/theAfternoonWe/">
                    <img src="photos/photo1.png" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the afternoon we tried suicide">
                <a class="image-link" href="https://ni0j.github.io/theAfternoonWe/">
                    <img src="photos/photo1.png" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the afternoon we tried suicide">
                <a class="image-link" href="https://ni0j.github.io/theAfternoonWe/">
                    <img src="photos/photo1.png" />
                </a>
            </div>
            <!-- <div class="photos_line_photo">
                <img src="photos/photo19.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo20.png" />
            </div> -->
            <!-- <div class="photos_line_photo">
                <img src="photos/photo21.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo7.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo7.png" />
            </div> -->
        </div>
        <div class="photos_line">
            <div class="photos_line_photo" data-cursor-text="the afternoon we tried suicide">
                <a class="image-link" href="https://ni0j.github.io/theAfternoonWe/">
                    <img src="photos/photo1.png" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the afternoon we tried suicide">
                <a class="image-link" href="https://ni0j.github.io/theAfternoonWe/">
                    <img src="photos/photo1.png" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the afternoon we tried suicide">
                <a class="image-link" href="https://ni0j.github.io/theAfternoonWe/">
                    <img src="photos/photo1.png" />
                </a>
            </div>
            <div class="photos_line_photo" data-cursor-text="the afternoon we tried suicide">
                <a class="image-link" href="https://ni0j.github.io/theAfternoonWe/">
                    <img src="photos/photo1.png" />
                </a>
            </div>
            <!-- <div class="photos_line_photo">
                <img src="photos/photo26.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo27.png" />
            </div> -->
        </div>
        <!-- <div class="photos_line">
            <div class="photos_line_photo">
                <img src="photos/photo22.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo23.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo24.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo25.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo26.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo27.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo28.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo7.png" />
            </div>
            <div class="photos_line_photo">
                <img src="photos/photo7.png" />
            </div> -->
        </div> 
    </div>
</body>
<script>
    const photobox = {
        container: document.querySelector(".photos"),
        img_data: [],
        container_width: 0,
        container_height: 0,
        photo_width: 0,
        photo_height: 0,
        if_movable: false,
        mouse_x: 0,
        mouse_y: 0,
        standard_width: 1440,
        scale_nums: 1,
        init() {
            this.resize();
            window.addEventListener("resize", () => {
                this.resize();
            });
            this.container.addEventListener("mousedown", () => {
                this.if_movable = true;
                this.mouse_x = event.clientX;
                this.mouse_y = event.clientY;
            });
            this.container.addEventListener("mouseup", () => {
                this.if_movable = false;
            });
            this.container.addEventListener("mouseleave", () => {
                this.if_movable = false;
            });
            this.container.addEventListener("mousemove", () => {
                this.move(event.clientX, event.clientY);
            });
        },
        resize() {
            let imgs = [...document.querySelectorAll(".photos_line_photo")];
            this.container_width = this.container.offsetWidth;
            this.container_height = this.container.offsetHeight;
            this.photo_width = imgs[0].offsetWidth;
            this.photo_height = imgs[0].offsetHeight;
            this.scale_nums = document.body.offsetWidth / this.standard_width;
            this.container.style.transform = `scale(${this.scale_nums})`;
            gsap.to(imgs, {
                transform: `translate(0,0)`,
                duration: 0,
                ease: 'power4.out'
            });
            this.img_data = [];
            imgs.forEach(img => {
                this.img_data.push({
                    node: img,
                    x: img.offsetLeft,
                    y: img.offsetTop,
                    mov_x: 0,
                    mov_y: 0,
                    ani: 0
                });
            });
        },
        move(x, y) {
            if (!this.if_movable) return 0;
            let distance_x = (x - this.mouse_x) / this.scale_nums;
            let distance_y = (y - this.mouse_y) / this.scale_nums;
            this.img_data.forEach((img) => {
                let duration = 1;
                img.mov_x += distance_x;
                if (img.x + img.mov_x > this.container_width) {
                    img.mov_x -= this.container_width;
                    duration = 0;
                }
                if (img.x + img.mov_x < -this.photo_width) {
                    img.mov_x += this.container_width;
                    duration = 0;
                }
                img.mov_y += distance_y;
                if (img.y + img.mov_y > this.container_height) {
                    img.mov_y -= this.container_height;
                    duration = 0;
                }
                if (img.y + img.mov_y < -this.photo_height) {
                    img.mov_y += this.container_height;
                    duration = 0;
                }
                if (img.ani) img.ani.kill();
                img.ani = gsap.to(img.node, {
                    transform: `translate(${img.mov_x}px,${img.mov_y}px)`,
                    duration: duration,
                    ease: 'power4.out'
                });
            });
            this.mouse_x = x;
            this.mouse_y = y;
        }
    };
    photobox.init();

    document.addEventListener('DOMContentLoaded', () => {

    const customCursor = document.getElementById('custom-cursor');
    const photoContainers = document.querySelectorAll('.photos_line_photo');
    document.addEventListener('mousemove', (e) => {
        customCursor.style.left = e.clientX + 'px';
        customCursor.style.top = e.clientY + 'px';
    });

    photoContainers.forEach(container => {
        container.addEventListener('mouseenter', () => {
            const cursorText = container.getAttribute('data-cursor-text');
            
            customCursor.textContent = cursorText;
            
            customCursor.style.opacity = '1';
        });

        container.addEventListener('mouseleave', () => {
            customCursor.style.opacity = '0';
        });
    });
});

function positionElements() {
        if (window.innerWidth > 768) {
            // 桌面端恢复默认样式
            const header = document.querySelector('.header');
            const contact = document.querySelector('.contact');
            header.style.top = '';
            header.style.left = '';
            header.style.transform = '';
            contact.style.bottom = '';
            contact.style.left = '';
            contact.style.transform = '';
            return;
        }

        const header = document.querySelector('.header');
        const contact = document.querySelector('.contact');
        const photos = document.querySelector('.photos');

        const vh = window.innerHeight;
        
        // 获取 photos 的实际位置（考虑 scale: 300%）
        const photosRect = photos.getBoundingClientRect();
        
        // 关键：photos 被 scale 放大后超出屏幕，我们需要计算可见部分
        const visibleTop = Math.max(0, photosRect.top);
        const visibleBottom = Math.min(vh, photosRect.bottom);
        
        const hh = header.offsetHeight;
        const ch = contact.offsetHeight;

        // 计算上方和下方的实际可用空白区域
        const topSpace = visibleTop;
        const bottomSpace = vh - visibleBottom;

        // Header 在上方空白区域居中
        const headerTop = Math.max(0, (topSpace - hh) / 2);
        
        // Contact 在下方空白区域居中
        const contactBottom = Math.max(0, (bottomSpace - ch) / 2);

        // 应用定位 - 保持水平居中
        header.style.top = `${headerTop}px`;
        header.style.bottom = 'auto';
        header.style.left = '50%';
        header.style.transform = 'translateX(-50%)';
        
        contact.style.bottom = `${contactBottom}px`;
        contact.style.top = 'auto';
        contact.style.left = '50%';
        contact.style.transform = 'translateX(-50%)';

        // Debug 信息
        console.log('=== Position Elements ===');
        console.log({
            windowSize: `${window.innerWidth}x${vh}`,
            'photosRect.top': photosRect.top.toFixed(2),
            'photosRect.bottom': photosRect.bottom.toFixed(2),
            'photosRect.height': photosRect.height.toFixed(2),
            visibleTop: visibleTop.toFixed(2),
            visibleBottom: visibleBottom.toFixed(2),
            topSpace: topSpace.toFixed(2),
            bottomSpace: bottomSpace.toFixed(2),
            headerHeight: hh.toFixed(2),
            contactHeight: ch.toFixed(2),
            headerTop: headerTop.toFixed(2),
            contactBottom: contactBottom.toFixed(2)
        });
    }

    // 挂载到全局以便 photobox 调用
    window.positionElements = positionElements;

    // 确保在内容加载完成后执行
    window.addEventListener('load', () => {
        setTimeout(positionElements, 200);
    });
    window.addEventListener('resize', () => {
        setTimeout(positionElements, 100);
    });

    function createSideText() {
        const photos = document.querySelector('.photos');
        const text = '¿ ?\n'.repeat(50); // 重复足够多行

        ['left', 'right'].forEach(side => {
            const el = document.createElement('div');
            el.className = `side-text side-text--${side}`;
            el.textContent = text;
            document.body.appendChild(el);
        });
    }
    createSideText();
</script>

</html>
